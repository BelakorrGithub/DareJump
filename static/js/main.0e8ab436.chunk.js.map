{"version":3,"sources":["App.module.css","App.js","index.js"],"names":["module","exports","Player","PlaygroundWrapper","Playground","PLAYER_WIDTH","STEP","ACCELERATION_FACTOR","FALLING_INTERVAL","FALLING_INTERVAL_SECONDS","yAccelerationReducer","state","action","type","Object","objectSpread","velY","newPosY","Math","max","posY","min","initialPosYState","App","_useState","useState","_useState2","slicedToArray","posX","setPosX","_useReducer","useReducer","_useReducer2","posYState","dispatchYState","containerRef","useRef","useEffect","eventListener","event","screenWidth","current","clientWidth","key","document","addEventListener","removeEventListener","intervalId","setInterval","clearInterval","react_default","a","createElement","className","styles","ref","style","left","bottom","ReactDOM","render","src_App","getElementById"],"mappings":"2EACAA,EAAAC,QAAA,CAAkBC,OAAA,oBAAAC,kBAAA,+BAAAC,WAAA,mICGZC,EAAe,GACfC,EAAO,GAGPC,EAAsB,IACtBC,EAAmB,GACnBC,EAA2BD,EAAmB,IASpD,SAASE,EAAqBC,EAAOC,GACnC,OAAQA,EAAOC,MACb,IAAK,OACH,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GACFH,EADL,CAEEK,KAAM,IAEV,IAAK,OACH,IAAMC,EAAUC,KAAKC,IAAIR,EAAMS,KAAOT,EAAMK,KAAOP,EAA0B,GAC7E,OAAOK,OAAAC,EAAA,EAAAD,CAAA,GACFH,EADL,CAEES,KAAMH,EACND,KACc,IAAZC,EACIC,KAAKG,IAAIV,EAAMK,KAAOT,EAAsBE,EAA0B,KACtE,IAEV,IAAK,OACH,OAAOK,OAAAC,EAAA,EAAAD,CAAA,GACFH,EADL,CAEES,KAAMT,EAAMS,KAAO,MAEvB,QACE,OAAOT,GAIb,IAAMW,EAAmB,CACvBN,KAAM,EACNI,KAAM,KAuDOG,MApDf,WAAe,IAAAC,EACWC,mBAAS,IADpBC,EAAAZ,OAAAa,EAAA,EAAAb,CAAAU,EAAA,GACNI,EADMF,EAAA,GACAG,EADAH,EAAA,GAAAI,EAEuBC,qBAAWrB,EAAsBY,GAFxDU,EAAAlB,OAAAa,EAAA,EAAAb,CAAAgB,EAAA,GAENG,EAFMD,EAAA,GAEKE,EAFLF,EAAA,GAGPG,EAAeC,iBAAO,MAsC5B,OArCAC,oBAAU,WACR,IAAMC,EAAgB,SAAAC,GACpB,IAAMC,EAAcL,EAAaM,QAAQC,YAEvB,eAAdH,EAAMI,KAAwBf,EAAOY,EAAcnC,EACrDwB,EAAQX,KAAKG,IAAIO,EAAOtB,EAAMkC,EAAcnC,IAErB,cAAdkC,EAAMI,KAAuBf,EAAO,EAC7CC,EAAQX,KAAKC,IAAIS,EAAOtB,EAAM,IACP,MAAdiC,EAAMI,KAA6B,YAAdJ,EAAMI,KACb,IAAnBV,EAAUb,MACZc,EAAe,CAAErB,KAAM,UAK7B,OADA+B,SAASC,iBAAiB,UAAWP,GAC9B,WACLM,SAASE,oBAAoB,UAAWR,KAEzC,CAACV,EAAMK,EAAWE,IAErBE,oBAAU,WACR,GAAIJ,EAAUb,KAAO,EAAG,CACtB,IAAM2B,EAAaC,YAAY,WACzBf,EAAUb,KAAO,EACnBc,EAAe,CAAErB,KAAM,UAEvBoC,cAAcF,GACdb,EAAe,CAAErB,KAAM,WAExBL,GACH,OAAO,WACLyC,cAAcF,MAGjB,CAACd,IAGFiB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOnD,mBACrB+C,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOlD,WAAYmD,IAAKpB,GACtCe,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOpD,OAAQsD,MAAO,CAAEC,KAAM7B,EAAM8B,OAAQzB,EAAUb,YC5FhFuC,IAASC,OAAOV,EAAAC,EAAAC,cAACS,EAAD,MAASjB,SAASkB,eAAe","file":"static/js/main.0e8ab436.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"App_Player__1cmvK\",\"PlaygroundWrapper\":\"App_PlaygroundWrapper__3fXHM\",\"Playground\":\"App_Playground__kojSG\"};","import React, { useState, useEffect, useRef, useReducer } from 'react'\r\n\r\nimport styles from './App.module.css'\r\n\r\nconst PLAYER_WIDTH = 32\r\nconst STEP = 10\r\nconst JUMP_HEIGHT = 40\r\nconst FLOOR_LEVEL = 40\r\nconst ACCELERATION_FACTOR = 500\r\nconst FALLING_INTERVAL = 50\r\nconst FALLING_INTERVAL_SECONDS = FALLING_INTERVAL / 1000\r\n\r\n/*\r\n * ACCELERATION_FACTOR = 10 pixels each second^2\r\n * This means, the velocity will increase in 10 pixels every second\r\n * Since the interval we have is FALLING_INTERVAL_SECONDS, we need to add\r\n * ACCELERATION_FACTOR * FALLING_INTERVAL_SECONDS every tick of the interval.\r\n */\r\n\r\nfunction yAccelerationReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'STOP':\r\n      return {\r\n        ...state,\r\n        velY: 0,\r\n      }\r\n    case 'FALL':\r\n      const newPosY = Math.max(state.posY - state.velY * FALLING_INTERVAL_SECONDS, 0)\r\n      return {\r\n        ...state,\r\n        posY: newPosY,\r\n        velY:\r\n          newPosY !== 0\r\n            ? Math.min(state.velY + ACCELERATION_FACTOR * FALLING_INTERVAL_SECONDS, 1000)\r\n            : 0,\r\n      }\r\n    case 'JUMP':\r\n      return {\r\n        ...state,\r\n        posY: state.posY + 100,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst initialPosYState = {\r\n  velY: 0,\r\n  posY: 500,\r\n}\r\n\r\nfunction App() {\r\n  const [posX, setPosX] = useState(50)\r\n  const [posYState, dispatchYState] = useReducer(yAccelerationReducer, initialPosYState)\r\n  const containerRef = useRef(null)\r\n  useEffect(() => {\r\n    const eventListener = event => {\r\n      const screenWidth = containerRef.current.clientWidth\r\n      // Moves right only if didn't reach the end of the screen\r\n      if (event.key === 'ArrowRight' && posX < screenWidth - PLAYER_WIDTH) {\r\n        setPosX(Math.min(posX + STEP, screenWidth - PLAYER_WIDTH))\r\n        // Moves left only if didn't reach the end of the screen\r\n      } else if (event.key === 'ArrowLeft' && posX > 0) {\r\n        setPosX(Math.max(posX - STEP, 0))\r\n      } else if (event.key === ' ' || event.key === 'ArrowUp') {\r\n        if (posYState.posY === 0) {\r\n          dispatchYState({ type: 'JUMP' })\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', eventListener)\r\n    return () => {\r\n      document.removeEventListener('keydown', eventListener)\r\n    }\r\n  }, [posX, posYState, containerRef])\r\n\r\n  useEffect(() => {\r\n    if (posYState.posY > 0) {\r\n      const intervalId = setInterval(() => {\r\n        if (posYState.posY > 0) {\r\n          dispatchYState({ type: 'FALL' })\r\n        } else {\r\n          clearInterval(intervalId)\r\n          dispatchYState({ type: 'STOP' })\r\n        }\r\n      }, FALLING_INTERVAL)\r\n      return () => {\r\n        clearInterval(intervalId)\r\n      }\r\n    }\r\n  }, [posYState])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className={styles.PlaygroundWrapper}>\r\n        <div className={styles.Playground} ref={containerRef}>\r\n          <div className={styles.Player} style={{ left: posX, bottom: posYState.posY }} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}